<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
<!-- font from www.webpagepublicity.com -->
<style type="text/css">
@font-face {
 font-family: phoenix_font;
 src: url('http://dl.dropbox.com/u/39786635/alexisitalic.ttf');
}
@font-face {
 font-family: be_font;
 src: url('http://dl.dropbox.com/u/39786635/anythingyouwant.ttf');
}
@font-face {
 font-family: imp_font;
 src: url('http://dl.dropbox.com/u/39786635/aldosnova.ttf');
}
.cell {
 display: table-cell;
 padding-right : 10px
}
.BloodEagle {
 color: #8A0829;
 font-weight: bold;
 font-family: be_font;
}
.Imperial {
 color: #0404B4;
 font-family: imp_font;
}
.Phoenix {
 color: #868A08;
 font-family: phoenix_font;
}
</style>
</head>
<script>//<![CDATA[
var debug = ""

function jsubst(pos, json){
  $.each(json, function(key, value) {
   var elem = pos.find('.'+key).first();
   if (value && typeof value === 'object') {
     if(value.length) {
       var tmpl = elem.find('.subelem').first();
       $.each(value, function(k, v){
         var newelem = tmpl.clone();
         jsubst(newelem, v);
         elem.append(newelem);
       });
     } else {
       jsubst(elem, value)
     }
   } else {
     styledText("" + value, elem);
   }
  });
}

function styledText(value, elem){
  elem.text(value)
  if (elem.hasClass('coloured')){
   elem.addClass(value.replace(' ', ''))
  }
}

$(document).ready(function() {
  $("a").click(function(e) {
    debug = ""
    e.preventDefault();
    $('#spinner').show();
    var server_info = $('#_server_info_tmpl').clone()
 
    $.getJSON($(this).attr("href"),
      function(data) {
        $('#server_info').empty();
        jsubst(server_info, data);
        $('#server_info').append(server_info.children())
      }).error(function(jx, txt, err) { alert(txt + "(" +err+ ") :" + jx.responseText); })
        .complete(function(){
          $('#spinner').hide();
          $('#debug').html(debug);
        });
  })

$('#_server_info_tmpl').hide();
$('#spinner').hide();
});
//]]></script>
<body>
<a href="/94.23.229.44/7778.json">Waking fields</a> - 
<a href="/94.23.229.44/7780.json">Frenchie</a> - 
<a href="/94.23.229.44/7782.json">Rox</a>
<img src="/ajax-loader.gif" id="spinner"/>
<div id="_server_info_tmpl">
<div ><b><span class="name"></span></b> (Password? : <span class="password"></span>)</div>
<div>Players : <span class="numplayers"></span> / <span class="maxplayers"></span> </div>
<div class="admin" >
Admin : <span class="name"></span> (<span class="email"></span>)
</div>
<div class="game">
<div> Map : <span class="map"></span> (<span class="gametype"></span>)</div>
<div> Scores :
 <span class="team1">
  <span class="name coloured"></span>
  <span class="score"></span>
 </span>
 <span class="team2">
  <span class="name coloured"></span>
  <span class="score" /></span>
 </span>
</div>
<br/>
<div>
 <span class="players" style="display: table">
  <div style="display: table-row; font-weight:bold">
   <span class="cell">Player</span>
   <span class="cell">ping</span>
   <span class="cell">team</span>
   <span class="cell">score</span>
  </div>
  <div class="subelem" style="display: table-row">
   <span class="name cell" ></span>
   <span class="ping cell" ></span>
   <span class="team coloured cell" ></span>
   <span class="score cell"></span>
  </div>
 </span>
</div>
</div>
</div>
<div id="server_info"> </div>
<span id="debug"></span>
</body>
</html>
